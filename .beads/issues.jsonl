{"id":"bd-eye-06a","title":"Support Dolt databases alongside SQLite","description":"Detect whether the backing store is a Dolt database or SQLite and use the appropriate driver.\n\n## Context\n\nbd-eye currently assumes a SQLite database via better-sqlite3 (synchronous, readonly WAL mode). Beads itself supports Dolt as a backend. bd-eye should be able to read from either.\n\n## Detection strategy\n\n- If the resolved path is a directory containing a `.dolt` subdirectory, treat as Dolt\n- If the resolved path is a `.db` file, treat as SQLite\n- The `BEADS_DB` env var and auto-discovery logic in `resolveDbPath()` already resolve to a path — detection layers on top of that\n\n## Implementation plan\n\n### 1. Make the Db interface async\n\nThe `Db` typedef in `src/server/db.js` (line 41-53) currently returns synchronous values. All methods need to return `Promise\u003cT\u003e` to support both sync (better-sqlite3) and async (mysql2) drivers.\n\n**Files affected:**\n- `src/server/db.js` — change typedef, wrap better-sqlite3 calls in `Promise.resolve()` or use `async` functions\n- `src/server/routes/issues.js` — add `await` to every `db.*()` call, make route handlers `async`\n- `src/server/index.js` — `await openDb()` at startup\n\n### 2. Extract SQLite implementation\n\nMove the current better-sqlite3 implementation into `src/server/db-sqlite.js`, exporting a function with the same `openDb` signature that returns a `Db`.\n\n### 3. Create Dolt implementation\n\nNew file `src/server/db-dolt.js`:\n- Connect to Dolt SQL server via `mysql2/promise`\n- Implement the same `Db` interface\n- Connection config from env vars: `DOLT_HOST`, `DOLT_PORT`, `DOLT_USER`, `DOLT_PASSWORD`, `DOLT_DATABASE`\n- The SQL queries are standard and should transfer directly\n- Views `ready_issues` and `blocked_issues` must exist in the Dolt schema (beads creates these)\n\n### 4. Add detection and factory in db.js\n\n`src/server/db.js` becomes a thin dispatcher:\n- `resolveDbPath()` — unchanged\n- `detectDbType(path)` — returns `'sqlite' | 'dolt'` based on path characteristics\n- `openDb(path)` — calls the appropriate implementation\n\n### 5. Adapt the file watcher\n\n`src/server/watcher.js` currently watches SQLite WAL/SHM files via chokidar. For Dolt:\n- Option A: Poll `DOLT_LOG()` or `HASHOF('HEAD')` on an interval to detect commits\n- Option B: Watch the `.dolt/noms` directory for file changes\n- Extract a `createWatcher(dbType, path, onChange)` factory\n\n### 6. Update configuration\n\n- Add new env vars to `.env.example`: `DOLT_HOST`, `DOLT_PORT`, `DOLT_USER`, `DOLT_PASSWORD`, `DOLT_DATABASE`\n- Update README with Dolt setup instructions\n- Add `mysql2` as an optional/peer dependency\n\n## Key risks\n\n- The sync-to-async migration touches every route handler — keep the diff minimal by making SQLite impl async too\n- Dolt SQL server must be running separately — document this clearly\n- Views (`ready_issues`, `blocked_issues`) must exist in Dolt — verify beads creates them for Dolt backends","status":"closed","priority":2,"issue_type":"feature","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-15T16:50:54Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:09:31Z","closed_at":"2026-02-15T17:19:41Z","work_type":"mutex"}
{"id":"bd-eye-1eo","title":"Throughput chart","description":"Chart showing issues closed over time. The closed_at timestamp already exists on issues","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:46Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:46Z","labels":["complexity:medium","impact:medium"]}
{"id":"bd-eye-2vs","title":"Test auto-sync hook","status":"tombstone","priority":4,"issue_type":"task","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-16T10:38:07Z","created_by":"Daniel Chicot","updated_at":"2026-02-16T10:38:18Z","close_reason":"Testing auto-sync"}
{"id":"bd-eye-2yu","title":"Vim h/l keys to navigate between board columns","description":"Add h/l keyboard shortcuts to move focus left/right between board columns, complementing the existing j/k card navigation. h moves to the previous column, l moves to the next column. Should maintain vertical position where possible.","status":"closed","priority":2,"issue_type":"feature","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T13:13:59Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T13:15:24Z","closed_at":"2026-02-19T13:15:24Z","close_reason":"Implemented h/l column navigation complementing j/k card navigation"}
{"id":"bd-eye-4vd","title":"Markdown rendering in detail panel","description":"Render issue descriptions and notes as markdown in the detail side panel instead of displaying raw text","design":"## Implementation\n\n1. Install `marked` dependency\n2. Create a `Markdown` component that uses `marked` to parse markdown and renders via `dangerouslySetInnerHTML`\n3. Sanitise output with marked's built-in sanitiser options\n4. Replace `pre-wrap` text divs in DetailPanel with the Markdown component for: description, design, notes, comment text, acceptance criteria\n5. Add CSS for rendered markdown (headings, lists, code blocks, links) scoped under `.markdown-body`\n\n## Test plan\n- Open bd-eye-4vd in the detail panel — its own description contains markdown (## headings, bullet lists, backtick code)\n- Verify headings, lists, inline code, and paragraphs render correctly\n- Verify plain text issues still display correctly (no markdown artefacts)","status":"closed","priority":4,"issue_type":"feature","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:38Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:09:31Z","closed_at":"2026-02-19T11:33:34Z","close_reason":"Implemented and verified - markdown renders correctly in detail panel"}
{"id":"bd-eye-5bz","title":"Board column sort ordering","description":"Allow users to change the sort order of cards within board columns. Currently cards are sorted by priority then created_at. Users should be able to choose alternative orderings such as by age, assignee, or type.","design":"## UI Design: Icon Button + Dropdown\n\nA small sort icon button in each column header that opens a dropdown menu. When a non-default sort is active, the icon gets accent color.\n\n### Sort options\n- Priority (default)\n- Age (oldest first)\n- Assignee (alphabetical)\n- Type\n\n### Visual treatment\n- Sort icon button matches recency-btn sizing (compact, 1px border, transparent bg)\n- Non-default state: border + icon color shift to accent (not filled, to avoid competing with recency toggle)\n- Dropdown: dark surface, 6px radius, box-shadow, left-anchored below button\n- Active option highlighted with accent text color\n\n### Files to modify\n- state.js: add columnSortOrders signal (per-column sort preference)\n- Board.jsx: extract sort logic into configurable comparator, pass SortControl as headerExtra\n- New SortControl.jsx component (icon button + dropdown)\n- main.css: sort-control, sort-btn, sort-dropdown, sort-option styles\n\n### Interaction\n- Click sort icon → dropdown opens\n- Click option → sort applied, dropdown closes\n- Click outside → dropdown closes\n- Each column remembers its own sort independently","status":"closed","priority":4,"issue_type":"feature","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T12:55:58Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T13:05:40Z","closed_at":"2026-02-19T13:05:40Z","close_reason":"Implemented per-column sort control with dropdown menu","labels":["complexity:medium","impact:medium"]}
{"id":"bd-eye-7jb","title":"Add test suite with 85% minimum coverage","description":"The project currently has zero tests. Add a comprehensive test suite targeting at least 85% code coverage.\n\n## Scope\n\nServer-side code in src/server/:\n\n- **db.js**: detectDbType() path classification (sqlite vs dolt), resolveDbPath() env var / auto-discovery / fallback behaviour, openDb() factory dispatching\n- **db-sqlite.js**: All Db interface methods (allIssues, issueById, readyIssues, blockedIssues, dependenciesFor, epics, epicChildren, labels, commentsFor, allLabels, searchIssues, close) against a temp SQLite database\n- **db-dolt.js**: Same Db interface methods — will need a mock or integration test against a real Dolt SQL server\n- **routes/issues.js**: Response shapes, query param filtering, 404 handling, label attachment via attachLabels()\n- **watcher.js**: createWatcher() factory dispatching, SQLite watcher triggers on file change, Dolt watcher polls and detects hash changes\n- **index.js**: Startup wiring (may be covered by integration tests)\n\n## Approach\n\n- Pick a test runner (vitest recommended — fast, ESM-native, built-in coverage via c8/v8)\n- Use parameterized tests where possible\n- Use a temp SQLite database for db-sqlite and route tests\n- Mock mysql2/promise for db-dolt unit tests\n- Add npm scripts: test, test:coverage\n- Configure coverage thresholds: 85% minimum for lines, branches, functions, statements\n- Add coverage config to vitest.config.js or package.json","status":"closed","priority":2,"issue_type":"task","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-15T17:38:53Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:09:31Z","closed_at":"2026-02-15T18:39:23Z","close_reason":"99 tests, 94.87% branch coverage, squash-merged via PR #2"}
{"id":"bd-eye-81k","title":"Show updated-at indicator on initial page load","description":"Set lastUpdated on initial data fetch so the timestamp appears immediately, not only after the first SSE event","status":"closed","priority":3,"issue_type":"bug","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T12:54:34Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:54:39Z","closed_at":"2026-02-19T12:54:39Z","close_reason":"Set lastUpdated in useIssues after initial fetch completes"}
{"id":"bd-eye-8tu","title":"Dolt watcher polls WORKING instead of HEAD","description":"The Dolt watcher polled HASHOF('HEAD') which only changes on commit. Since bd writes to the working set without committing, the watcher never detected changes. Changed to HASHOF('WORKING') so SSE fires on any working set write.","status":"closed","priority":2,"issue_type":"bug","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T12:16:19Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:22:06Z","closed_at":"2026-02-19T12:22:06Z","close_reason":"Fixed: watcher now uses DOLT_HASHOF_DB() to detect working set changes"}
{"id":"bd-eye-9zd","title":"Activity feed","description":"Show recent status changes across the project with timestamps. The data (created_at, updated_at, closed_at) already exists on issues","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:39Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:39Z","labels":["complexity:medium","impact:medium"]}
{"id":"bd-eye-b04","title":"Keyboard navigation","description":"j/k to move between cards, enter to open detail panel, escape to close. Vim-style navigation for power users","status":"closed","priority":4,"issue_type":"feature","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:51Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T13:12:45Z","closed_at":"2026-02-19T13:12:45Z","close_reason":"Implemented vim-style j/k card navigation, Enter to open detail panel, Escape to clear focus","labels":["complexity:low","impact:medium"]}
{"id":"bd-eye-dd3","title":"Client-side test coverage to 85%","description":"Add component tests for all client-side code (components, hooks, router, state) using vitest with @testing-library/preact to achieve 85% coverage","status":"closed","priority":2,"issue_type":"task","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:35:30Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:09:31Z","closed_at":"2026-02-19T11:51:28Z","close_reason":"382 tests passing, coverage: 93.48% stmts, 89.30% branches, 94.18% functions, 94.68% lines — all exceeding 85% threshold"}
{"id":"bd-eye-dif","title":"Board column filters","description":"Add per-column filtering to board columns so users can narrow down cards within a specific column independently of the global filter bar. For example, filtering the Open column by assignee or type without affecting other columns.","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T12:56:01Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:56:01Z","labels":["complexity:high","impact:high"]}
{"id":"bd-eye-f19","title":"Inline card creation","description":"Add new issues directly from the board view without navigating away, creating cards inline within a column","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:41Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:41Z","labels":["complexity:high","impact:high"]}
{"id":"bd-eye-fqu","title":"Custom column ordering","description":"Let users define which statuses map to which board columns and in what order, beyond the current fixed Open/In Progress/Closed layout","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:52Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:52Z","labels":["complexity:high","impact:low"]}
{"id":"bd-eye-inm","title":"Arrow key aliases for card navigation","description":"Arrow keys work as aliases for vim h/j/k/l card navigation: ArrowDown=j, ArrowUp=k, ArrowRight=l, ArrowLeft=h.","status":"closed","priority":2,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T13:24:23Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T13:24:26Z","closed_at":"2026-02-19T13:24:26Z","close_reason":"Implemented arrow key aliases alongside vim h/j/k/l navigation"}
{"id":"bd-eye-ja6","title":"Project switcher","description":"Multi-project navigation allowing bd-eye to point at multiple beads databases and switch between them. Continues work from feature/multi-board-navigation branch","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:49Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:49Z","labels":["complexity:high","impact:medium"]}
{"id":"bd-eye-l2k","title":"Board updated indicator","description":"Subtle visual indicator when the board receives an SSE refresh, so the user knows data has changed. Currently the board silently re-renders which can be disorienting.","design":"## Implementation\n\n### Approach: Status bar timestamp with fade-in highlight\n\nA \"Updated HH:MM:SS\" timestamp in the bottom status bar that briefly brightens on each SSE refresh, then fades back to a dimmed resting state. Non-intrusive, never covers content, never requires dismissal.\n\n### Behaviour\n1. SSE refresh completes → timestamp updates to current time → colour jumps to active/bright state\n2. After 800ms hold, transitions to resting state over 2200ms (total visible: 3s)\n3. If another SSE fires mid-fade, animation resets from bright state\n4. No user action required\n\n### Visual spec (dark theme)\n- Position: right-aligned in the status bar\n- Font: 0.75rem, monospace/tabular numerals (no layout shift)\n- Resting colour: `#4a5568` (muted grey, ~40% brightness)\n- Active colour: `#68d391` (soft green, \"data arrived\" semantic)\n- Transition: `color` property, `ease-out`, 2200ms fade-back\n- Background: transparent, inherits status bar\n\n### Integration\n- After SSE-triggered board state update, set a signal/boolean that the StatusBar observes\n- StatusBar stores last-updated Date and isHighlighted boolean\n- On highlight: apply active CSS class, setTimeout 800ms to clear (CSS handles remaining fade)\n- A module-level signal is sufficient, no global state manager needed\n\n### Scope\n- Shows THAT an update occurred, not WHAT changed\n- Card-level diff animation is a separate, larger feature\n\n### Files to change\n- `src/client/main.css` — add `.status-updated` active and transition rules\n- `src/client/state.js` — add `lastUpdated` signal\n- `src/client/hooks/useLiveUpdates.js` — set lastUpdated on SSE refresh\n- New or inline: `UpdatedAt` component in the status bar area\n- `src/client/components/App.jsx` — render UpdatedAt in the layout","status":"closed","priority":3,"issue_type":"feature","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T12:26:01Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:29:21Z","closed_at":"2026-02-19T12:29:21Z","close_reason":"Implemented: subtle timestamp in bottom-right that flashes green on SSE refresh, fades to muted grey"}
{"id":"bd-eye-nzv","title":"Board swimlanes","description":"Group rows within each board column by assignee, epic, or label for better visual organisation","design":"## Implementation\n\n### Approach: User-selectable swimlanes via FilterBar dropdown\n\n### State\n- New signal `swimlaneGrouping` in `state.js` — values: `null` | `'assignee'` | `'epic'` | `'label'` | `'priority'`\n- Default: `null` (no swimlanes, current flat layout)\n\n### Layout: Row-major restructure\n- When `swimlaneGrouping` is set, switch from column-major to row-major rendering\n- Each `SwimlaneRow` spans all three columns, with a label on the left edge\n- DnD drop targets encode both column (status) and row (group key)\n- When grouping is `null`, render current flat column layout unchanged\n\n### Grouping logic (Board.jsx)\n- After filtering, partition issues by the selected grouping key\n- Produce a `Map\u003cgroupKey, { open: [], in_progress: [], closed: [] }\u003e`\n- Sort group keys alphabetically, with `'Unassigned'` / `'No epic'` / `'Unlabelled'` last\n\n### UI toggle (FilterBar)\n- Add a \"Group by\" dropdown alongside existing filter controls\n- Options: None, Assignee, Epic, Label, Priority\n- Selecting a value updates the `swimlaneGrouping` signal\n\n### CSS\n- CSS grid for row-major layout: columns defined by statuses, rows by groups\n- Swimlane row label pinned to left edge\n- Row dividers between swimlanes\n- Collapse/expand toggle per row (optional, nice-to-have)\n\n### Files touched\n- `src/client/state.js` — new signal\n- `src/client/components/Board.jsx` — grouping logic, row-major rendering\n- `src/client/components/DroppableColumn.jsx` — adapt for cell-within-row usage\n- `src/client/components/FilterBar.jsx` — group-by dropdown\n- `src/client/main.css` — swimlane grid layout\n- New: `src/client/components/SwimlaneRow.jsx` (optional, could inline in Board)","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:40Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:02:18Z","labels":["complexity:medium","impact:medium"]}
{"id":"bd-eye-ops","title":"Cycle time tracking","description":"Track and display time from open to closed per issue, giving visibility into how long work takes","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:47Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:47Z","labels":["complexity:medium","impact:medium"]}
{"id":"bd-eye-pc2","title":"Card age indicators","description":"Subtle colour fade or badge on cards showing how long an issue has been in its current column, making stale work visually stand out","status":"closed","priority":4,"issue_type":"feature","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:37Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:49:56Z","closed_at":"2026-02-19T12:49:56Z","close_reason":"Implemented card age indicators with top-border visual treatment","labels":["complexity:low","impact:medium"]}
{"id":"bd-eye-prn","title":"WIP limits","description":"Configurable work-in-progress limits per board column with visual highlighting when exceeded","design":"## Implementation\n\n### State\n- New signal `wipLimits` in `state.js` — shape: `{ open: number|null, in_progress: number|null, closed: number|null }`\n- Default: all `null` (no limits, opt-in per column)\n\n### Display (DroppableColumn.jsx)\n- Column header shows count/limit when set: e.g. `In Progress (3/3)`\n- Conditional CSS class `column-wip-exceeded` when count \u003e= limit\n- Visual highlight (red/orange header background or border) when exceeded\n\n### Settings UI — choose one approach later\n**A) Inline edit**: Click the column header count to pop a small input for setting the limit. Minimal UI, discoverable.\n**B) Settings panel**: A board-level settings icon that opens a modal/drawer where you configure limits for all columns. More structured, but heavier.\n**C) FilterBar control**: Add a WIP config toggle alongside existing filter controls. Consistent with existing UI patterns.\n\n### Persistence — choose one approach later\n**A) localStorage**: Simplest, no server changes. Limits persist per browser. Good enough for single-user.\n**B) Server config API**: New endpoint + config table. Shareable across devices. Heavier, only needed for multi-user.\n**C) URL params**: Shareable/bookmarkable but awkward for config that rarely changes.\n\n### Files touched\n- `src/client/state.js` — new signal\n- `src/client/components/DroppableColumn.jsx` — count/limit display, exceeded class\n- `src/client/main.css` — exceeded styling\n- Settings UI component (approach-dependent)","status":"open","priority":4,"issue_type":"feature","assignee":"Daniel Chicot","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:40Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T12:53:08Z","labels":["complexity:low","impact:high"]}
{"id":"bd-eye-rmc","title":"Bulk card selection","description":"Shift-click to select multiple cards on the board for batch status changes or other bulk operations","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:42Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:42Z","labels":["complexity:medium","impact:medium"]}
{"id":"bd-eye-tge","title":"Blocked time tracking","description":"Track and display how long issues spend in a blocked state, highlighting bottlenecks in the workflow","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:47Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:47Z","labels":["complexity:high","impact:medium"]}
{"id":"bd-eye-ual","title":"Commit linking","description":"Show related git commits in the issue detail panel by matching beads issue IDs in commit messages","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:53Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:53Z","labels":["complexity:medium","impact:medium"]}
{"id":"bd-eye-ufp","title":"Cross-project dependencies","description":"Visualise and manage dependencies between issues across different beads projects. Beads prefixes already namespace issues","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:50Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:50Z","labels":["complexity:high","impact:low"]}
{"id":"bd-eye-w4d","title":"Interactive dependency graph","description":"Interactive visualisation on the Deps view using a graph renderer like d3-dag or elkjs. The dependency data is already served by the API","status":"open","priority":4,"issue_type":"feature","owner":"daniel.chicot@dlapiper.com","created_at":"2026-02-19T11:09:38Z","created_by":"Daniel Chicot","updated_at":"2026-02-19T11:09:38Z","labels":["complexity:medium","impact:high"]}
